package cn.sirbox.controller;

import java.util.List;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;

import com.github.pagehelper.PageInfo;

import cn.sirbox.model.Logger;
import cn.sirbox.service.impl.LoggerService;
import cn.sirbox.utils.config;
import cn.sirbox.utils.utils;

@Controller
@RequestMapping("logger")
public class LoggerController {
    @Autowired
    private LoggerService loggerService;
    
    @RequestMapping("list")
    public String list(Integer thispage,HttpServletRequest request,Model model){
        if(thispage==null||"".equals(thispage)){
            thispage=0;
        }
        Integer pagenumber=Integer.parseInt(config.getKeyValue(request.getRealPath("/"), "pagenumber"));
        List<Logger> list=loggerService.selectAllLogger(thispage,pagenumber);
        PageInfo<Logger> page=new PageInfo<>(list);
        model.addAttribute("page", page.getLastPage());
        model.addAttribute("thispage", page.getPageNum()-1);
        model.addAttribute("list", list);
        model.addAttribute("sta", 24);
        return "loggerlist";
    }
    
    @RequestMapping("alllist")
    public String alllist(Integer thispage,HttpServletRequest request,Model model){
        if(thispage==null&&"".equals(thispage)){
            thispage=0;
        }
        Integer pagenumber=Integer.parseInt(config.getKeyValue(request.getRealPath("/"), "pagenumber"));
        List<Logger> list=loggerService.selectAllLogger1(thispage,pagenumber);
        PageInfo<Logger> page=new PageInfo<>(list);
        model.addAttribute("page", page.getLastPage());
        model.addAttribute("thispage", page.getPageNum()-1);
        model.addAttribute("list", list);
        model.addAttribute("sta", 0);
        return "loggerlist";
    }
    
    @RequestMapping("alllist1")
    public String alllist1(Integer thispage,HttpServletRequest request,Model model){
        if(thispage==null&&"".equals(thispage)){
            thispage=0;
        }
        Integer pagenumber=Integer.parseInt(config.getKeyValue(request.getRealPath("/"), "pagenumber"));
        List<Logger> list=loggerService.selectAllLogger2(thispage,pagenumber);
        PageInfo<Logger> page=new PageInfo<>(list);
        model.addAttribute("page", page.getLastPage());
        model.addAttribute("thispage", page.getPageNum()-1);
        model.addAttribute("list", list);
        model.addAttribute("sta", 7);
        return "loggerlist";
    }
    
    @RequestMapping("alllist2")
    public String alllist2(Integer thispage,HttpServletRequest request,Model model){
        if(thispage==null&&"".equals(thispage)){
            thispage=0;
        }
        Integer pagenumber=Integer.parseInt(config.getKeyValue(request.getRealPath("/"), "pagenumber"));
        List<Logger> list=loggerService.selectAllLogger3(thispage,pagenumber);
        PageInfo<Logger> page=new PageInfo<>(list);
        model.addAttribute("page", page.getLastPage());
        model.addAttribute("thispage", page.getPageNum()-1);
        model.addAttribute("list", list);
        model.addAttribute("sta", 30);
        return "loggerlist";
    }
    
}
