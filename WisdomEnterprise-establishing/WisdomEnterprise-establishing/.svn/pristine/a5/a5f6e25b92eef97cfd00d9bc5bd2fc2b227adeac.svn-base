<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>会员财务查询页面</title>
<script type="text/javascript" src="${pageContext.request.contextPath}/js/jquery-2.2.3.min.js"></script>
<script type="text/javascript">
		function submit(){
			var username=$("#username").val();
			var deal=$("#deal")val();
			var number=$("#number").val();
			var way=$("#way option:selected").val();
			
			if(username==null || username==''){
				alert("请输入用户名！");
				return false;
			}else if(deal==null || deal==''){
				alert("请输入金额");
				return false;
			}else if(number==null || number==''){
				alert("请输入订单号！");
				return false;
			}else if(way==null||way==""){
				alert("请选择付款方式！");
				return false;
			}
			$.ajax({ 
				url: "${pageContext.request.contextPath}/booked/reduce.do",
				cache:false,
				data:"type="+type+"&username="+username+"&deal="+deal+"&number="+number+"&way="+way+"&note="+note,
				dataType:"json",
				type:"POST",
				success: function(data){
					if(data==1){
						resetValue();
						alert("入账成功！");
					}else{
						alert("入账失败！");
					}
					}
				})			
		}
		
		// 重置数据
		function resetValue(){
			$("#username").val("");
			$("#type").attr("value","");
			$("#way").attr("value","");
			$("#deal").val("");
			$("#number").val("");
			$("#note").val("");
		}
</script>
</head>
<body style="align: center;">
<form action="${pageContext.request.contextPath}/booked/reduce.do" id="frm">
	<div style="margin-top:50px; width:800px; border:1px solid #F00; margin-left: 200px">
			 
		            记账摘要:
			 <select name="type">
					<option value="">请选择</option>
					<option>入账</option>
					<option>扣账</option>
			 </select><br/>
			 用户名：<input type="text" name="username"><br/>
			 记账金额：<input type="text" name="deal">元<br/>
			 订单编号：<input type="text" name="number"><br/>
			 付款方式：
			 <select name="way">
			 		<option value="">请选择</option>
					<option>支付宝</option>
					<option>微信</option>
					<option>网银在线</option>
					<option>现金</option>
					<option>公司账号</option>
					<option>邮政汇款</option>
			 </select><br/>
			备注：<input type="text" name="note">
      	  	<input type="button" value="确定" onclick="submit()">
     </div>
</form>

</body>
</html>